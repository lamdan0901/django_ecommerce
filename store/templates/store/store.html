{% extends 'store/main.html' %} {% load static %} {% block content %}

<h2>{% if category %} {{ category.name }}{% else %}All products{% endif %}</h2>

<div class="dropdown">
  <a
    class="btn btn-secondary dropdown-toggle"
    href="#"
    role="button"
    id="dropdownMenuLink"
    data-toggle="dropdown"
    aria-expanded="false"
  >
    Choose category
  </a>

  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
    <a class="dropdown-item" href="{% url 'store:store' %}">All</a>

    {% for c in categories %}
    <a class="dropdown-item" href="{{ c.get_absolute_url }}">{{c.name}}</a>
    {% endfor %}
  </div>
</div>

<div class="row">
  {% for product in products %}
  <div class="col-lg-4">
    <img class="thumbnail" src="{{product.imageURL}}" />
    <div class="box-element product">
      <h6><strong>{{product.name}}</strong></h6>
      <hr />

      <button
        data-product="{{product.id}}"
        data-action="add"
        class="btn btn-outline-secondary add-btn update-cart"
      >
        Add to Cart
      </button>

      <a
        data-product="{{product.id}}"
        data-action="view"
        class="btn btn-outline-success view-item"
        >View</a
      >
      <h4 style="float: right"><strong>${{product.price}}</strong></h4>
    </div>
  </div>
  {% endfor %}
</div>

<script>
  var viewBtns = document.getElementsByClassName("view-item");

  for (i = 0; i < viewBtns.length; i++) {
    viewBtns[i].addEventListener("click", function () {
      var productId = this.dataset.product;
      var action = this.dataset.action;

      console.log(productId + " " + action);

      // if (user == 'AnonymousUser'){
      // }else{
      // }
    });
  }
</script>
{% endblock content %}
