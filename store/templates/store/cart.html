{% extends 'store/main.html' %}
{% load static %}

{% block content %}
<div class="row">
    <div class="col-lg-12">
        <a class="btn btn-outline-dark btn-sm my-3" href="{% url 'store' %}">
            &#x2190; Back to Store
        </a>
        <br>

        <div class="box-element" style="border-radius: 15px;">
            <div class="cart-row">
                <div style="flex: 1"></div>
                <div style="flex: 2"><strong>Item</strong></div>
                <div style="flex: 1"><strong>Unit Price</strong></div>
                <div style="flex: 1"><strong>Quantity</strong></div>
                <div style="flex: 1"><strong>Total Price</strong></div>
                <div style="flex: 1"></div>
            </div>

            {% for item in items %}
            <div class="cart-row" style="align-items: center; justify-content: center;">
                <div style="flex:1"><img class="row-image" src="{{item.product.image.url}}" alt=""></div>
                <div style="flex:2">{{item.product.name}}</div>
                <div style="flex:1">${{item.product.price|floatformat:2}}</div>

                <div style="flex:1; display:flex">
                    <svg xmlns="http://www.w3.org/2000/svg" data-product={{item.product.id}} data-action="remove"
                        class="update-cart icon icon-tabler icon-tabler-minus" width="26" height="26"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>

                    <div style="margin: auto 5px; font-size: 18px;">{{item.quantity}}</div>

                    <svg xmlns="http://www.w3.org/2000/svg" data-product={{item.product.id}} data-action="add"
                        class="icon icon-tabler icon-tabler-plus update-cart" width="26" height="26" viewBox="0 0 24 24"
                        stroke-width="1.5" stroke="#00abfb" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                </div>

                <div style="flex:1">${{item.get_total|floatformat:2}}</div>
                <div style="flex: 1">
                    <a data-product="{{item.product.id}}" data-action="delete"
                        class="btn btn-outline-danger btn-sm delete-item">Remove from cart</a>
                </div>
            </div>
            {% endfor %}
            <br>
        </div>

        <br>
        <br>

        <div class="box-element" style="border-radius: 15px;">
            <div style=" display: flex;  align-items: center;  padding: 10px 0;">
                <div style="flex: 2"></div>
                <div style="flex: 1"></div>
                <div style="flex: 1"></div>
                <div style="flex: 1">Total Items: <strong>{{order.get_cart_items}}</strong></div>
                <div style="flex: 1; margin-right: 40px;">Total Pay:
                    <strong>${{order.get_cart_total|floatformat:2}}</strong>
                </div>
                <div style="flex: 1"><a class="btn btn-success" style="margin-left: 10px;"
                        href="{% url 'checkout' %}">Check out</a></div>
            </div>
        </div>
    </div>
</div>
<br>
<br>
{% endblock content %}